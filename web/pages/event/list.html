<div id="event-list" ng-controller="EventListCtrl" ng-init="dateAlreadyShown=(events[0].startDate | amDateFormat : 'YYYY-MM')">

	<div class="row">
		<div class="col-md-12">
			<h3 class="page-title">{{ 'event.list.title' | translate }}</h3>
		</div>
	</div>

	<div class="row margin-top event-list">
		<div class="col-md-9">
			<table>

				<tr ng-if="0" class="row" ng-repeat-start="event in (orderedEvents = (events | orderBy : sortKey : sortOrderDesc))">
				</tr>

				<!-- year -->
				<tr ng-if="(sortKey == 'startDate') && ($index == 0 || (((event.startDate | amDateFormat : 'YYYY-MM') != (orderedEvents[$index - 1].startDate | amDateFormat : 'YYYY-MM')) && (event.startDate | amDateFormat : 'M') == '1' ))">
					<td colspan="4">
						<h4>{{ event.startDate | amDateFormat : 'YYYY' }}</h4>
					</td>
				</tr>

				<!-- month -->
				<tr ng-if="sortKey == 'startDate' && ($index == 0 || ((event.startDate | amDateFormat : 'YYYY-MM') != (orderedEvents[$index - 1].startDate | amDateFormat : 'YYYY-MM')))">
					<td colspan="4">
						<h5>{{ event.startDate | amDateFormat : 'MMMM' }}</h5>
					</td>
				</tr>

				<!-- event -->
				<tr ng-repeat-end class="event-list-row" ang-click="goToEvent(event.id)">
					<td class="event-list-date event-list-date-left">
						<span>{{ event.startDate | amDateFormat : 'D' }}</span>
					</td>
					<td class="event-list-date event-list-date-dash">
						<span>-</span>
					</td>
					<td class="event-list-date event-list-date-right">
						<span>{{ event.endDate | amDateFormat : 'D' }}</span>
						<!-- <span ng-if="(event.startDate | amDateFormat : 'M') != (event.endDate | amDateFormat : 'M')">&nbsp;{{ event.endDate | amDateFormat : 'MMM' }}</span> -->
					</td>
					<td>
						<div class="event-list-text-top">{{ event | eventname }}</div>
						<div class="event-list-text-bottom">
							<span class="margin-right-small" ng-if="event.tournamentEdition.divisionRegistrations | notEmpty">
<!-- 								<i class="fa fa-venus-mars"></i> -->
								<bas ng-repeat="divReg in event.tournamentEdition.divisionRegistrations">{{ divReg | division }}<bas ng-if="!$last">, </bas></bas>
							</span>
							<span class="margin-right" ng-if="event.location | notEmpty">
								<i class="fa fa-map-marker"></i> {{ event.location | location : 'city' }}
							</span>
							&nbsp;
						</div>
					</td>
				</tr>
			</table>

		</div>
	</div>

	<div class="row">
		<div class="col-md-12"></div>
	</div>

</div>